/* var echarts = require("echarts"); */

var chartDom = document.getElementById("main_IPAR");
var myChart = echarts.init(chartDom);
var option;

var upColor = "#ec0000";
var upBorderColor = "#8A0000";
var downColor = "#00da3c";
var downBorderColor = "#008F28";

// Each item: open，close，lowest，highest
var data = splitData([
    ['2022/08/09', 85.82, 84.14, 86.38, 83.42],
    ['2022/08/10', 82.57, 81.14, 84.51, 78.56],
    ['2022/08/11', 82.27, 81.25, 82.86, 81.11],
    ['2022/08/12', 81.66, 82.86, 83.0, 80.42],
    ['2022/08/15', 82.76, 85.42, 85.57, 82.76],
    ['2022/08/16', 84.91, 85.29, 86.28, 84.29],
    ['2022/08/17', 85.19, 84.3, 86.11, 83.65],
    ['2022/08/18', 83.92, 85.28, 85.85, 83.54],
    ['2022/08/19', 85.0, 83.66, 85.0, 83.08],
    ['2022/08/22', 83.4, 82.62, 83.4, 82.01],
    ['2022/08/23', 82.3, 82.38, 83.02, 81.59],
    ['2022/08/24', 82.19, 81.26, 82.82, 81.2],
    ['2022/08/25', 81.17, 83.07, 83.07, 79.76],
    ['2022/08/26', 83.15, 81.47, 83.15, 81.36],
    ['2022/08/29', 80.7, 80.14, 81.01, 79.85],
    ['2022/08/30', 80.7, 79.07, 80.7, 78.66],
    ['2022/08/31', 79.44, 78.52, 80.39, 78.51],
    ['2022/09/01', 78.2, 79.04, 79.2, 77.26],
    ['2022/09/02', 79.74, 78.12, 80.32, 77.39],
    ['2022/09/06', 78.12, 76.97, 78.99, 76.29],
    ['2022/09/07', 77.03, 78.37, 78.58, 76.41],
    ['2022/09/08', 78.21, 78.3, 78.9, 77.13],
    ['2022/09/09', 79.92, 81.77, 81.89, 78.88],
    ['2022/09/12', 82.05, 83.58, 84.91, 82.05],
    ['2022/09/13', 82.32, 78.28, 84.24, 77.98],
    ['2022/09/14', 77.64, 78.18, 78.61, 76.94],
    ['2022/09/15', 77.79, 76.7, 78.91, 76.1],
    ['2022/09/16', 76.39, 78.93, 78.93, 76.1],
    ['2022/09/19', 78.21, 79.59, 80.05, 78.21],
    ['2022/09/20', 78.89, 79.82, 80.26, 78.73],
    ['2022/09/21', 80.39, 79.23, 81.97, 78.71],
    ['2022/09/22', 79.47, 79.14, 79.8, 78.0],
    ['2022/09/23', 78.81, 77.32, 78.81, 76.55],
    ['2022/09/26', 77.18, 76.7, 79.11, 76.0],
    ['2022/09/27', 77.26, 74.53, 77.94, 74.4],
    ['2022/09/28', 74.87, 75.33, 75.83, 73.32],
    ['2022/09/29', 75.05, 73.78, 75.27, 72.47],
    ['2022/09/30', 73.71, 75.46, 76.77, 72.95],
    ['2022/10/03', 76.36, 76.28, 77.75, 75.5],
    ['2022/10/04', 76.9, 78.3, 78.8, 76.9],
    ['2022/10/05', 77.72, 77.01, 77.72, 76.19],
    ['2022/10/06', 76.36, 76.85, 77.63, 75.72],
    ['2022/10/07', 76.52, 74.26, 76.7, 73.91],
    ['2022/10/10', 74.62, 75.19, 75.81, 73.35],
    ['2022/10/11', 75.0, 76.02, 77.19, 74.89],
    ['2022/10/12', 76.3, 76.22, 76.61, 75.24],
    ['2022/10/13', 75.41, 78.01, 78.72, 73.99],
    ['2022/10/14', 78.39, 76.74, 78.39, 76.28],
    ['2022/10/17', 77.82, 78.95, 79.27, 77.24],
    ['2022/10/18', 80.49, 79.54, 81.31, 79.18],
    ['2022/10/19', 78.83, 78.25, 80.64, 77.12],
    ['2022/10/20', 77.97, 74.76, 78.99, 74.66],
    ['2022/10/21', 75.25, 74.75, 75.35, 73.53],
    ['2022/10/24', 75.55, 74.95, 75.55, 73.46],
    ['2022/10/25', 75.41, 79.83, 80.29, 74.97],
    ['2022/10/26', 79.75, 78.93, 80.43, 78.62],
    ['2022/10/27', 79.26, 78.93, 80.52, 78.57],
    ['2022/10/28', 79.49, 81.19, 82.13, 78.97],
    ['2022/10/31', 81.0, 80.88, 81.89, 79.74],
    ['2022/11/01', 81.49, 81.92, 82.51, 80.68],
    ['2022/11/02', 81.59, 79.05, 82.89, 78.83],
    ['2022/11/03', 78.91, 79.1, 79.57, 77.19],
    ['2022/11/04', 80.12, 82.49, 82.88, 80.12],
    ['2022/11/07', 82.0, 83.63, 85.08, 81.55],
    ['2022/11/08', 84.15, 84.06, 84.84, 83.23],
    ['2022/11/09', 83.29, 79.57, 83.59, 77.72],
    ['2022/11/10', 80.0, 82.6, 85.72, 78.77],
    ['2022/11/11', 83.54, 87.01, 88.52, 83.3],
    ['2022/11/14', 87.32, 86.07, 90.56, 84.82],
    ['2022/11/15', 87.25, 88.89, 89.57, 86.11],
    ['2022/11/16', 88.88, 88.56, 89.81, 87.56],
    ['2022/11/17', 87.02, 88.1, 89.26, 87.02],
    ['2022/11/18', 89.54, 88.02, 90.24, 85.24],
    ['2022/11/21', 87.85, 88.51, 89.57, 87.03],
    ['2022/11/22', 91.49, 91.92, 92.46, 88.38],
    ['2022/11/23', 91.59, 90.94, 92.46, 90.06],
    ['2022/11/25', 90.69, 91.66, 92.18, 90.65],
    ['2022/11/28', 90.89, 91.78, 92.59, 90.0],
    ['2022/11/29', 92.1, 91.58, 92.5, 90.99],
    ['2022/11/30', 91.95, 95.29, 95.81, 90.61],
    ['2022/12/01', 95.83, 96.44, 96.61, 93.93],
    ['2022/12/02', 94.91, 99.35, 100.37, 94.13],
    ['2022/12/05', 98.41, 98.9, 99.87, 97.53],
    ['2022/12/06', 99.38, 98.45, 100.77, 97.4],
    ['2022/12/07', 97.92, 97.21, 99.17, 97.0],
    ['2022/12/08', 97.88, 97.51, 97.9, 96.71],
    ['2022/12/09', 97.51, 96.83, 97.85, 96.46],
    ['2022/12/12', 96.89, 96.62, 97.33, 94.6],
    ['2022/12/13', 98.06, 95.55, 98.87, 95.03],
    ['2022/12/14', 94.85, 95.02, 96.25, 93.82],
    ['2022/12/15', 94.3, 93.25, 94.43, 92.29],
    ['2022/12/16', 92.78, 92.37, 93.29, 91.53],
    ['2022/12/19', 92.72, 93.66, 94.32, 91.78],
    ['2022/12/20', 93.66, 93.36, 95.34, 93.13],
    ['2022/12/21', 94.08, 96.67, 96.97, 93.3],
    ['2022/12/22', 96.0, 96.47, 96.72, 94.49],
    ['2022/12/23', 97.01, 98.66, 98.82, 96.48],
    ['2022/12/27', 98.68, 99.28, 99.46, 97.94],
    ['2022/12/28', 98.99, 96.09, 99.32, 96.01],
    ['2022/12/29', 96.95, 97.84, 98.26, 96.14],
    ['2022/12/30', 97.29, 96.52, 97.63, 94.12],
    ['2023/01/03', 97.69, 97.44, 98.1, 95.77],
    ['2023/01/04', 97.78, 96.65, 98.71, 96.57],
    ['2023/01/05', 97.14, 105.11, 105.88, 96.93],
    ['2023/01/06', 106.68, 110.72, 110.92, 102.15],
    ['2023/01/09', 110.96, 110.57, 111.69, 109.28],
    ['2023/01/10', 109.65, 111.55, 112.68, 109.65],
    ['2023/01/11', 112.01, 111.29, 112.65, 111.05],
    ['2023/01/12', 111.57, 112.1, 112.94, 110.42],
    ['2023/01/13', 111.85, 111.58, 112.4, 111.09],
    ['2023/01/17', 111.98, 110.68, 111.99, 110.56],
    ['2023/01/18', 110.99, 109.99, 111.38, 108.34],
    ['2023/01/19', 109.72, 110.58, 111.22, 109.21],
    ['2023/01/20', 111.43, 113.02, 113.69, 110.9],
    ['2023/01/23', 113.4, 113.79, 116.09, 112.0],
    ['2023/01/24', 115.53, 114.22, 116.84, 114.09],
    ['2023/01/25', 113.72, 113.88, 114.21, 112.78],
    ['2023/01/26', 114.19, 112.61, 115.44, 112.31],
    ['2023/01/27', 112.21, 112.99, 113.8, 111.2],
    ['2023/01/30', 112.57, 115.95, 116.2, 112.57],
    ['2023/01/31', 116.59, 118.22, 118.39, 115.66],
    ['2023/02/01', 118.25, 120.01, 121.33, 117.43],
    ['2023/02/02', 120.46, 120.87, 123.39, 119.89],
    ['2023/02/03', 120.57, 118.48, 121.57, 117.59],
    ['2023/02/06', 117.61, 116.58, 119.09, 116.09],
    ['2023/02/07', 116.13, 117.13, 117.33, 114.5],
    ['2023/02/08', 116.51, 113.37, 116.6, 113.3],
    ['2023/02/09', 114.04, 114.62, 114.89, 111.83],
    ['2023/02/10', 114.12, 113.95, 115.37, 113.89],
    ['2023/02/13', 114.74, 118.91, 119.04, 114.64],
    ['2023/02/14', 118.87, 117.45, 120.49, 117.27],
    ['2023/02/15', 117.53, 117.72, 117.91, 116.41],
    ['2023/02/16', 116.35, 115.34, 116.69, 113.63],
    ['2023/02/17', 115.53, 118.16, 118.69, 115.16],
    ['2023/02/21', 117.41, 117.76, 118.7, 116.47],
    ['2023/02/22', 118.26, 120.06, 120.06, 116.44],
    ['2023/02/23', 120.52, 120.35, 121.02, 119.02],
    ['2023/02/24', 119.68, 120.14, 120.71, 118.24],
    ['2023/02/27', 120.24, 120.21, 121.64, 119.67],
    ['2023/02/28', 120.46, 120.41, 123.18, 120.27],
    ['2023/03/01', 128.99, 131.34, 131.34, 124.2],
    ['2023/03/02', 131.02, 138.76, 138.76, 131.02],
    ['2023/03/03', 139.56, 140.01, 140.86, 134.92],
    ['2023/03/06', 139.17, 138.39, 139.98, 135.21],
    ['2023/03/07', 140.12, 137.7, 140.72, 137.09],
    ['2023/03/08', 137.72, 135.92, 137.72, 134.29],
    ['2023/03/09', 136.41, 133.8, 136.41, 133.39],
    ['2023/03/10', 133.31, 133.73, 134.31, 130.01],
    ['2023/03/13', 131.81, 133.69, 136.99, 131.81],
    ['2023/03/14', 136.06, 136.64, 136.83, 133.12],
    ['2023/03/15', 133.86, 139.76, 140.0, 132.55],
    ['2023/03/16', 138.6, 141.73, 141.73, 137.13],
    ['2023/03/17', 140.1, 136.94, 141.18, 136.55],
    ['2023/03/20', 137.79, 139.24, 140.69, 137.79],
    ['2023/03/21', 141.16, 140.52, 142.96, 138.81],
    ['2023/03/22', 141.13, 138.42, 143.51, 138.07],
    ['2023/03/23', 140.25, 139.02, 142.01, 138.45],
    ['2023/03/24', 137.94, 139.72, 141.48, 137.4],
    ['2023/03/27', 140.91, 140.93, 141.4, 138.93],
    ['2023/03/28', 140.54, 143.87, 144.25, 140.54],
    ['2023/03/29', 144.58, 142.6, 145.0, 142.13],
    ['2023/03/30', 142.6, 142.07, 143.18, 141.84],
    ['2023/03/31', 142.74, 142.24, 143.89, 141.2],
    ['2023/04/03', 142.77, 146.42, 146.88, 142.19],
    ['2023/04/04', 146.05, 145.09, 146.05, 143.68],
    ['2023/04/05', 144.89, 138.91, 145.2, 137.98],
    ['2023/04/06', 139.01, 138.42, 140.0, 137.37],
    ['2023/04/10', 138.0, 139.03, 140.18, 137.0],
    ['2023/04/11', 139.6, 140.21, 141.63, 139.41],
    ['2023/04/12', 141.4, 144.99, 145.55, 141.22],
    ['2023/04/13', 146.14, 146.31, 148.18, 146.14],
    ['2023/04/14', 145.98, 147.03, 148.82, 145.31],
    ['2023/04/17', 147.07, 149.84, 150.73, 146.89],
    ['2023/04/18', 149.71, 149.42, 151.45, 148.81],
    ['2023/04/19', 149.54, 151.56, 151.61, 148.33],
    ['2023/04/20', 152.85, 157.59, 161.17, 152.85],
    ['2023/04/21', 158.49, 157.31, 160.29, 156.44],
    ['2023/04/24', 158.28, 156.55, 158.76, 155.43],
    ['2023/04/25', 156.15, 153.94, 156.55, 153.13],
    ['2023/04/26', 153.13, 152.67, 155.61, 151.76],
    ['2023/04/27', 152.85, 154.27, 158.13, 151.94],
    ['2023/04/28', 154.23, 151.79, 155.57, 151.62],
    ['2023/05/01', 152.37, 151.56, 154.4, 150.99],
    ['2023/05/02', 150.97, 152.53, 153.08, 149.6],
    ['2023/05/03', 151.0, 151.78, 153.64, 149.51],
    ['2023/05/04', 151.19, 148.73, 151.19, 147.45],
    ['2023/05/05', 149.13, 152.66, 154.23, 147.44],
    ['2023/05/08', 152.66, 152.74, 153.57, 150.59],
    ['2023/05/09', 151.75, 134.34, 151.88, 130.22],
    ['2023/05/10', 135.1, 135.24, 135.78, 132.13],
    ['2023/05/11', 135.17, 135.91, 136.84, 134.41],
    ['2023/05/12', 136.04, 136.9, 138.47, 135.62],
    ['2023/05/15', 137.9, 136.18, 139.25, 135.37],
    ['2023/05/16', 135.36, 135.92, 138.07, 133.63],
    ['2023/05/17', 136.13, 134.8, 137.76, 133.84],
    ['2023/05/18', 134.67, 133.2, 135.69, 133.0],
    ['2023/05/19', 134.22, 134.23, 134.96, 132.89],
    ['2023/05/22', 134.81, 133.06, 134.81, 132.24],
    ['2023/05/23', 133.06, 131.57, 133.84, 130.54],
    ['2023/05/24', 131.06, 130.94, 131.61, 130.08],
    ['2023/05/25', 130.65, 129.71, 131.34, 128.28],
    ['2023/05/26', 130.0, 128.39, 131.2, 128.25],
    ['2023/05/30', 128.38, 128.31, 129.74, 127.2],
    ['2023/05/31', 128.81, 125.6, 128.81, 125.0],
    ['2023/06/01', 125.86, 127.1, 128.91, 125.86],
    ['2023/06/02', 128.2, 131.83, 132.22, 127.56],
    ['2023/06/05', 130.63, 128.64, 130.68, 126.63],
    ['2023/06/06', 128.63, 135.14, 135.27, 128.63],
    ['2023/06/07', 135.19, 134.53, 136.9, 133.46],
    ['2023/06/08', 134.32, 134.87, 136.34, 134.17],
    ['2023/06/09', 134.38, 133.86, 134.96, 133.34],
    ['2023/06/12', 134.7, 136.29, 138.19, 134.4],
    ['2023/06/13', 137.29, 136.31, 137.77, 135.58],
    ['2023/06/14', 136.66, 136.02, 139.24, 135.05],
    ['2023/06/15', 136.46, 139.78, 139.97, 136.46],
    ['2023/06/16', 140.22, 137.79, 140.22, 135.84],
    ['2023/06/20', 138.05, 137.04, 138.65, 136.56],
    ['2023/06/21', 137.14, 139.06, 140.0, 136.98],
    ['2023/06/22', 139.38, 136.75, 139.38, 136.32],
    ['2023/06/23', 136.0, 134.0, 136.88, 133.76],
    ['2023/06/26', 134.43, 134.53, 135.19, 133.68],
    ['2023/06/27', 134.92, 133.6, 135.99, 133.23],
    ['2023/06/28', 133.74, 132.46, 134.73, 131.43],
    ['2023/06/29', 132.47, 133.24, 134.76, 132.32],
    ['2023/06/30', 134.29, 135.23, 135.5, 133.56],
    ['2023/07/03', 135.15, 137.14, 137.14, 135.03],
    ['2023/07/05', 136.79, 135.14, 136.79, 134.27],
    ['2023/07/06', 133.79, 130.82, 134.1, 129.83],
    ['2023/07/07', 130.63, 130.25, 132.13, 130.25],
    ['2023/07/10', 130.61, 134.78, 135.34, 130.35],
    ['2023/07/11', 135.13, 134.9, 135.51, 133.63],
    ['2023/07/12', 136.35, 134.41, 137.04, 134.39],
    ['2023/07/13', 134.98, 133.59, 134.98, 132.55],
    ['2023/07/14', 133.24, 133.63, 134.06, 132.17],
    ['2023/07/17', 133.06, 134.57, 135.91, 132.57],
    ['2023/07/18', 134.61, 136.11, 136.79, 133.91],
    ['2023/07/19', 136.11, 133.55, 137.43, 131.09],
    ['2023/07/20', 133.6, 130.77, 133.6, 130.35],
    ['2023/07/21', 132.01, 132.04, 133.53, 131.66],
    ['2023/07/24', 131.47, 130.95, 132.83, 129.51],
    ['2023/07/25', 140.0, 143.99, 144.6, 137.38],
    ['2023/07/26', 144.0, 150.7, 151.95, 141.72],
    ['2023/07/27', 150.83, 149.29, 152.29, 148.56],
    ['2023/07/28', 150.9, 150.32, 152.04, 148.1],
    ['2023/07/31', 150.61, 149.56, 150.84, 148.5],
    ['2023/08/01', 148.88, 148.49, 150.24, 147.16],
    ['2023/08/02', 147.02, 148.69, 150.84, 147.02],
    ['2023/08/03', 148.45, 147.98, 150.51, 147.92],
    ['2023/08/04', 147.38, 146.82, 148.63, 146.3],
    ['2023/08/07', 147.22, 148.62, 149.07, 146.58],
]);
var volumes = [
    72700.0,
    159200.0,
    72500.0,
    67200.0,
    87600.0,
    61300.0,
    77800.0,
    67900.0,
    71400.0,
    53200.0,
    63100.0,
    43100.0,
    73800.0,
    54200.0,
    67800.0,
    43400.0,
    64700.0,
    56400.0,
    49600.0,
    68700.0,
    72900.0,
    70000.0,
    126900.0,
    88500.0,
    105400.0,
    73400.0,
    67500.0,
    169500.0,
    64400.0,
    59400.0,
    93700.0,
    67800.0,
    87900.0,
    87800.0,
    96300.0,
    132000.0,
    100700.0,
    179500.0,
    89700.0,
    66700.0,
    90400.0,
    67600.0,
    82100.0,
    58500.0,
    87400.0,
    74700.0,
    67900.0,
    43500.0,
    79500.0,
    55200.0,
    57500.0,
    92500.0,
    76600.0,
    71100.0,
    58300.0,
    63700.0,
    61400.0,
    63100.0,
    66600.0,
    85800.0,
    70300.0,
    59900.0,
    68200.0,
    96400.0,
    109200.0,
    122300.0,
    228700.0,
    116700.0,
    152000.0,
    160900.0,
    109800.0,
    101100.0,
    76800.0,
    71200.0,
    96900.0,
    48100.0,
    43200.0,
    59200.0,
    56000.0,
    100000.0,
    81800.0,
    130900.0,
    108600.0,
    90800.0,
    67100.0,
    80500.0,
    86800.0,
    67100.0,
    144000.0,
    118500.0,
    104700.0,
    241700.0,
    94700.0,
    121000.0,
    64900.0,
    103400.0,
    88000.0,
    44300.0,
    64000.0,
    54300.0,
    55300.0,
    86500.0,
    112500.0,
    217500.0,
    209900.0,
    154300.0,
    116300.0,
    103600.0,
    83800.0,
    163300.0,
    107900.0,
    124300.0,
    105500.0,
    99400.0,
    100700.0,
    113800.0,
    160100.0,
    94200.0,
    67400.0,
    75700.0,
    121700.0,
    126000.0,
    143400.0,
    162900.0,
    87100.0,
    83000.0,
    146100.0,
    98900.0,
    73500.0,
    97200.0,
    94100.0,
    68600.0,
    146700.0,
    97100.0,
    127100.0,
    151300.0,
    100700.0,
    86200.0,
    115300.0,
    190500.0,
    160300.0,
    189000.0,
    236800.0,
    205100.0,
    208000.0,
    120500.0,
    176000.0,
    211300.0,
    179200.0,
    247800.0,
    190300.0,
    151100.0,
    286300.0,
    111100.0,
    172300.0,
    137800.0,
    138300.0,
    142100.0,
    115500.0,
    137300.0,
    89300.0,
    91700.0,
    213800.0,
    141000.0,
    89500.0,
    170500.0,
    103700.0,
    199000.0,
    100300.0,
    134100.0,
    124900.0,
    117000.0,
    159300.0,
    109000.0,
    140500.0,
    275000.0,
    171200.0,
    102200.0,
    106900.0,
    87600.0,
    110800.0,
    106500.0,
    110600.0,
    148100.0,
    154900.0,
    90700.0,
    138900.0,
    106500.0,
    422700.0,
    215800.0,
    202500.0,
    98300.0,
    123500.0,
    104500.0,
    125200.0,
    147500.0,
    82400.0,
    85400.0,
    101300.0,
    116000.0,
    124800.0,
    92100.0,
    86700.0,
    232900.0,
    149700.0,
    86900.0,
    108100.0,
    124300.0,
    169600.0,
    87600.0,
    61600.0,
    172900.0,
    139000.0,
    137900.0,
    114800.0,
    337200.0,
    93500.0,
    76700.0,
    81500.0,
    223000.0,
    98600.0,
    68400.0,
    148600.0,
    179700.0,
    203500.0,
    60300.0,
    198000.0,
    96800.0,
    108600.0,
    88800.0,
    98000.0,
    100900.0,
    89200.0,
    94000.0,
    92200.0,
    77900.0,
    141500.0,
    92800.0,
    92600.0,
    64600.0,
    228400.0,
    248900.0,
    199500.0,
    132200.0,
    110800.0,
    73700.0,
    61200.0,
    81200.0,
    63100.0,
    57800.0,
]

function splitData(rawData) {
    const categoryData = [];
    const values = [];
    for (var i = 0; i < rawData.length; i++) {
        categoryData.push(rawData[i].splice(0, 1)[0]);
        values.push(rawData[i]);
    }
    return {
        categoryData: categoryData,
        values: values,
    };
}

function calculateMA(dayCount) {
    var result = [];
    for (var i = 0, len = data.values.length; i < len; i++) {
        if (i < dayCount) {
            result.push("-");
            continue;
        }
        var sum = 0;
        for (var j = 0; j < dayCount; j++) {
            sum += +data.values[i - j][1];
        }
        result.push(sum / dayCount);
    }
    return result;
}

option = {
    /* title: {
     *     text: "IPAR",
     *     left: 0,
     * }, */
    tooltip: {
        trigger: "axis",
        axisPointer: {
            type: "cross",
        },
    },
    legend: {
        data: ["日K", "MA5", "MA20", "MA30"],
    },
    grid: [
        {
            left: "10%",
            right: "10%",
            top: "5%",
            bottom: "30%",
        },
        {
            left: "10%",
            right: "10%",
            top: "70%",
            bottom: "5%",
        },
    ],
    axisPointer: {
        link: [
            {
                xAxisIndex: [0, 1],
            },
        ],
    },
    xAxis: [
        {
            type: "category",
            gridIndex: 0,
            data: data.categoryData,
            boundaryGap: false,
            axisLine: { onZero: false },
            splitLine: { show: false },
            min: "dataMin",
            max: "dataMax",
        },
        {
            type: "category",
            gridIndex: 1,
            data: data.categoryData,
            boundaryGap: false,
            splitLine: { show: false },
            axisLabel: { show: false },
            axisTick: { show: false },
            axisLine: { lineStyle: { color: "#777" } },
            min: "dataMin",
            max: "dataMax",
        },
    ],
    yAxis: [
        {
            scale: true,
            gridIndex: 0,
            splitNumber: 2,
            splitArea: {
                show: true,
            },
            min: (value) => {return value.min * 0.9},
            max: (value) => {return value.max * 1.1},
        },
        {
            scale: true,
            gridIndex: 1,
            splitNumber: 2,
            axisLabel: { show: false },
            axisLine: { show: false },
            axisTick: { show: false },
            splitLine: { show: false },
        },
    ],
    dataZoom: [
        {
            type: "inside",
            xAxisIndex: [0, 1],
            start: 50,
            end: 100,
        },
    ],
    series: [
        {
            name: "volume",
            type: "bar",
            xAxisIndex: 1,
            yAxisIndex: 1,
            itemStyle: {
                color: "#7fbe9e",
            },
            emphasis: {
                itemStyle: {
                    color: "#140",
                },
            },
            data: volumes,
        },
        {
            name: "日K",
            type: "candlestick",
            data: data.values,
            itemStyle: {
                color: upColor,
                color0: downColor,
                borderColor: upBorderColor,
                borderColor0: downBorderColor,
            },
            markLine: {
                symbol: ["none", "none"],
                data: [
                    {
                        name: "min line on close",
                        type: "min",
                        valueDim: "close",
                    },
                    {
                        name: "max line on close",
                        type: "max",
                        valueDim: "close",
                    },
                ],
            },
        },
        {
            name: "MA5",
            type: "line",
            data: calculateMA(5),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
        {
            name: "MA20",
            type: "line",
            data: calculateMA(20),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
        {
            name: "MA30",
            type: "line",
            data: calculateMA(30),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
    ],
};

option && myChart.setOption(option);