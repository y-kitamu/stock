/* var echarts = require("echarts"); */

var chartDom = document.getElementById("main_RACE");
var myChart = echarts.init(chartDom);
var option;

var upColor = "#ec0000";
var upBorderColor = "#8A0000";
var downColor = "#00da3c";
var downBorderColor = "#008F28";

// Each item: open，close，lowest，highest
var data = splitData([
    ['2022/08/05', 212.15, 211.94, 213.84, 210.7],
    ['2022/08/08', 213.3, 213.56, 215.4, 212.93],
    ['2022/08/09', 212.79, 210.47, 212.83, 210.0],
    ['2022/08/10', 215.85, 215.0, 216.84, 214.06],
    ['2022/08/11', 216.62, 215.27, 216.78, 214.4],
    ['2022/08/12', 214.72, 215.81, 215.83, 214.01],
    ['2022/08/15', 214.54, 214.66, 215.39, 213.53],
    ['2022/08/16', 209.95, 212.16, 212.8, 209.53],
    ['2022/08/17', 210.84, 211.38, 213.36, 209.35],
    ['2022/08/18', 211.08, 212.37, 212.38, 209.53],
    ['2022/08/19', 208.74, 207.04, 208.86, 205.57],
    ['2022/08/22', 202.5, 200.56, 203.58, 199.7],
    ['2022/08/23', 201.48, 201.9, 204.53, 201.48],
    ['2022/08/24', 201.48, 203.6, 205.21, 201.24],
    ['2022/08/25', 204.56, 206.92, 207.09, 203.95],
    ['2022/08/26', 204.5, 197.79, 205.41, 197.75],
    ['2022/08/29', 198.37, 198.99, 200.16, 198.08],
    ['2022/08/30', 199.25, 195.43, 199.98, 194.55],
    ['2022/08/31', 195.64, 194.66, 196.32, 193.8],
    ['2022/09/01', 192.5, 193.85, 194.05, 190.08],
    ['2022/09/02', 196.02, 191.18, 198.17, 190.39],
    ['2022/09/06', 188.71, 190.35, 191.12, 187.17],
    ['2022/09/07', 192.24, 195.27, 195.42, 191.88],
    ['2022/09/08', 190.3, 193.71, 194.0, 189.3],
    ['2022/09/09', 197.18, 195.8, 197.82, 195.57],
    ['2022/09/12', 200.48, 201.97, 202.81, 200.48],
    ['2022/09/13', 197.72, 195.52, 198.43, 195.03],
    ['2022/09/14', 198.8, 199.62, 201.08, 197.98],
    ['2022/09/15', 198.44, 196.64, 201.36, 196.47],
    ['2022/09/16', 196.38, 196.9, 197.44, 195.24],
    ['2022/09/19', 194.71, 198.44, 198.53, 194.71],
    ['2022/09/20', 194.7, 194.0, 194.96, 191.98],
    ['2022/09/21', 192.78, 192.48, 196.74, 192.1],
    ['2022/09/22', 191.34, 189.13, 191.58, 187.85],
    ['2022/09/23', 186.55, 186.25, 186.63, 183.63],
    ['2022/09/26', 187.28, 186.43, 190.31, 185.74],
    ['2022/09/27', 190.2, 189.19, 191.12, 186.53],
    ['2022/09/28', 187.18, 191.23, 191.79, 185.42],
    ['2022/09/29', 185.64, 186.42, 186.91, 183.15],
    ['2022/09/30', 184.85, 185.0, 188.23, 184.57],
    ['2022/10/03', 183.86, 186.7, 187.76, 182.79],
    ['2022/10/04', 192.53, 193.78, 196.05, 192.53],
    ['2022/10/05', 189.41, 193.52, 194.65, 187.43],
    ['2022/10/06', 190.74, 190.88, 192.24, 189.21],
    ['2022/10/07', 187.44, 185.0, 187.57, 184.7],
    ['2022/10/10', 184.58, 182.11, 184.85, 181.02],
    ['2022/10/11', 183.35, 183.15, 186.0, 182.0],
    ['2022/10/12', 183.0, 182.5, 184.31, 182.0],
    ['2022/10/13', 178.0, 183.45, 184.0, 176.82],
    ['2022/10/14', 185.58, 180.63, 186.27, 180.57],
    ['2022/10/17', 186.72, 188.59, 189.09, 185.9],
    ['2022/10/18', 192.74, 191.02, 193.48, 189.89],
    ['2022/10/19', 189.12, 187.57, 189.71, 186.1],
    ['2022/10/20', 187.57, 186.66, 189.67, 185.57],
    ['2022/10/21', 184.9, 188.37, 188.69, 184.15],
    ['2022/10/24', 189.5, 191.73, 192.78, 189.41],
    ['2022/10/25', 194.14, 196.51, 198.89, 194.07],
    ['2022/10/26', 195.66, 197.18, 199.44, 195.36],
    ['2022/10/27', 198.76, 196.29, 199.21, 196.08],
    ['2022/10/28', 196.62, 198.65, 199.17, 195.82],
    ['2022/10/31', 196.74, 196.77, 198.1, 195.27],
    ['2022/11/01', 200.86, 196.96, 201.72, 195.6],
    ['2022/11/02', 192.9, 191.59, 197.63, 190.29],
    ['2022/11/03', 189.16, 192.52, 193.78, 188.93],
    ['2022/11/04', 201.69, 199.2, 203.0, 197.22],
    ['2022/11/07', 200.42, 199.89, 201.0, 198.65],
    ['2022/11/08', 202.18, 204.3, 206.36, 201.96],
    ['2022/11/09', 202.24, 201.49, 205.12, 201.25],
    ['2022/11/10', 211.88, 212.8, 214.23, 210.82],
    ['2022/11/11', 215.0, 216.86, 218.54, 214.41],
    ['2022/11/14', 215.9, 212.76, 216.59, 212.76],
    ['2022/11/15', 215.94, 215.44, 216.89, 212.58],
    ['2022/11/16', 214.4, 213.94, 215.16, 213.3],
    ['2022/11/17', 211.1, 213.55, 213.8, 210.95],
    ['2022/11/18', 214.43, 216.33, 216.43, 213.6],
    ['2022/11/21', 214.86, 214.12, 216.0, 213.93],
    ['2022/11/22', 214.91, 216.36, 217.02, 214.49],
    ['2022/11/23', 216.61, 217.59, 218.49, 216.45],
    ['2022/11/25', 217.58, 218.14, 218.9, 217.56],
    ['2022/11/28', 218.97, 215.95, 219.89, 215.83],
    ['2022/11/29', 215.55, 215.22, 217.12, 215.07],
    ['2022/11/30', 219.65, 223.05, 223.05, 218.08],
    ['2022/12/01', 226.18, 228.08, 228.4, 224.94],
    ['2022/12/02', 224.64, 226.58, 226.68, 223.41],
    ['2022/12/05', 226.92, 223.68, 227.04, 223.68],
    ['2022/12/06', 223.49, 221.1, 223.83, 218.95],
    ['2022/12/07', 220.99, 220.08, 222.72, 219.77],
    ['2022/12/08', 219.63, 220.33, 220.69, 218.7],
    ['2022/12/09', 219.98, 220.72, 221.54, 219.42],
    ['2022/12/12', 222.29, 222.53, 222.76, 221.0],
    ['2022/12/13', 229.22, 225.49, 230.17, 222.93],
    ['2022/12/14', 225.92, 225.18, 227.32, 224.11],
    ['2022/12/15', 224.03, 222.4, 224.58, 221.16],
    ['2022/12/16', 221.05, 218.11, 222.33, 218.11],
    ['2022/12/19', 218.38, 216.13, 218.38, 216.08],
    ['2022/12/20', 213.45, 214.09, 214.98, 213.21],
    ['2022/12/21', 213.78, 213.9, 215.02, 213.54],
    ['2022/12/22', 213.2, 212.56, 213.36, 210.35],
    ['2022/12/23', 210.8, 211.01, 212.31, 209.88],
    ['2022/12/27', 211.8, 212.0, 212.97, 210.3],
    ['2022/12/28', 212.0, 210.25, 213.24, 210.04],
    ['2022/12/29', 213.79, 216.59, 216.93, 213.7],
    ['2022/12/30', 215.54, 214.22, 216.29, 212.8],
    ['2023/01/03', 216.66, 215.37, 218.76, 213.97],
    ['2023/01/04', 219.2, 219.67, 219.67, 216.61],
    ['2023/01/05', 217.25, 216.08, 218.45, 215.77],
    ['2023/01/06', 216.84, 224.08, 224.8, 216.2],
    ['2023/01/09', 230.0, 228.77, 232.75, 228.77],
    ['2023/01/10', 230.1, 231.95, 232.13, 229.26],
    ['2023/01/11', 232.96, 233.71, 234.88, 232.44],
    ['2023/01/12', 234.12, 235.84, 237.1, 232.67],
    ['2023/01/13', 234.78, 235.92, 236.45, 234.61],
    ['2023/01/17', 237.36, 237.86, 239.8, 237.36],
    ['2023/01/18', 241.94, 239.71, 242.64, 239.71],
    ['2023/01/19', 239.45, 237.99, 240.0, 236.67],
    ['2023/01/20', 240.2, 242.38, 242.5, 239.52],
    ['2023/01/23', 241.95, 243.64, 245.28, 241.66],
    ['2023/01/24', 242.7, 244.04, 244.43, 241.81],
    ['2023/01/25', 242.76, 245.58, 245.78, 242.36],
    ['2023/01/26', 246.76, 247.77, 248.5, 246.3],
    ['2023/01/27', 248.82, 253.72, 256.08, 248.82],
    ['2023/01/30', 253.75, 251.25, 255.06, 250.6],
    ['2023/01/31', 246.6, 251.31, 251.59, 246.51],
    ['2023/02/01', 249.81, 253.32, 256.46, 249.23],
    ['2023/02/02', 265.2, 265.48, 270.35, 262.61],
    ['2023/02/03', 260.45, 260.04, 264.0, 259.7],
    ['2023/02/06', 260.4, 261.31, 263.01, 258.96],
    ['2023/02/07', 262.51, 266.91, 267.25, 262.28],
    ['2023/02/08', 266.46, 266.56, 267.84, 265.15],
    ['2023/02/09', 269.58, 266.31, 270.12, 265.07],
    ['2023/02/10', 258.3, 259.68, 260.13, 256.92],
    ['2023/02/13', 261.61, 263.44, 264.9, 261.16],
    ['2023/02/14', 261.25, 265.61, 266.2, 260.98],
    ['2023/02/15', 263.99, 267.23, 267.3, 263.99],
    ['2023/02/16', 265.31, 265.88, 268.7, 264.14],
    ['2023/02/17', 264.89, 266.88, 267.59, 264.36],
    ['2023/02/21', 263.04, 262.8, 263.62, 261.78],
    ['2023/02/22', 261.81, 260.6, 262.29, 259.57],
    ['2023/02/23', 263.96, 262.15, 264.62, 261.26],
    ['2023/02/24', 257.7, 259.11, 260.02, 257.08],
    ['2023/02/27', 260.88, 261.36, 262.6, 260.52],
    ['2023/02/28', 259.72, 260.37, 262.09, 258.89],
    ['2023/03/01', 265.7, 262.72, 265.8, 262.14],
    ['2023/03/02', 262.32, 264.58, 265.05, 261.5],
    ['2023/03/03', 271.9, 271.45, 273.14, 270.54],
    ['2023/03/06', 273.5, 270.36, 273.84, 269.93],
    ['2023/03/07', 273.54, 268.67, 274.08, 268.14],
    ['2023/03/08', 268.57, 269.66, 270.76, 267.33],
    ['2023/03/09', 268.15, 264.68, 268.77, 263.13],
    ['2023/03/10', 265.77, 261.23, 265.77, 259.35],
    ['2023/03/13', 258.2, 260.06, 261.65, 257.82],
    ['2023/03/14', 262.56, 262.9, 263.79, 260.58],
    ['2023/03/15', 254.29, 256.29, 257.0, 252.17],
    ['2023/03/16', 256.32, 264.36, 265.31, 256.32],
    ['2023/03/17', 258.34, 259.2, 260.36, 256.98],
    ['2023/03/20', 262.74, 262.48, 263.74, 260.64],
    ['2023/03/21', 265.7, 266.64, 267.3, 265.22],
    ['2023/03/22', 269.06, 265.17, 271.0, 265.17],
    ['2023/03/23', 269.04, 266.12, 270.72, 264.22],
    ['2023/03/24', 264.23, 265.37, 265.71, 261.26],
    ['2023/03/27', 268.2, 266.17, 268.63, 265.45],
    ['2023/03/28', 266.81, 266.31, 266.95, 264.9],
    ['2023/03/29', 269.79, 268.87, 270.24, 267.96],
    ['2023/03/30', 269.28, 268.9, 270.0, 267.8],
    ['2023/03/31', 270.72, 270.94, 272.11, 270.19],
    ['2023/04/03', 270.2, 270.94, 271.52, 268.8],
    ['2023/04/04', 273.38, 270.83, 273.66, 270.2],
    ['2023/04/05', 274.99, 270.55, 275.28, 269.5],
    ['2023/04/06', 269.5, 271.94, 273.72, 269.5],
    ['2023/04/10', 270.08, 272.99, 273.3, 270.08],
    ['2023/04/11', 274.26, 274.22, 275.63, 273.5],
    ['2023/04/12', 277.38, 276.63, 278.2, 275.93],
    ['2023/04/13', 283.0, 282.94, 284.86, 279.72],
    ['2023/04/14', 284.94, 285.53, 286.61, 284.35],
    ['2023/04/17', 280.62, 281.04, 281.4, 277.92],
    ['2023/04/18', 280.14, 280.6, 281.64, 278.93],
    ['2023/04/19', 279.96, 278.63, 280.19, 278.22],
    ['2023/04/20', 273.2, 276.0, 276.66, 272.7],
    ['2023/04/21', 276.81, 278.03, 278.77, 274.78],
    ['2023/04/24', 278.84, 280.19, 280.64, 278.84],
    ['2023/04/25', 279.96, 277.21, 280.18, 277.14],
    ['2023/04/26', 278.22, 275.41, 279.24, 274.63],
    ['2023/04/27', 276.38, 278.24, 278.87, 275.3],
    ['2023/04/28', 275.26, 278.64, 278.96, 274.62],
    ['2023/05/01', 279.58, 279.14, 280.21, 278.66],
    ['2023/05/02', 274.26, 275.78, 276.32, 273.39],
    ['2023/05/03', 278.79, 277.64, 281.51, 277.46],
    ['2023/05/04', 290.16, 291.79, 293.64, 288.74],
    ['2023/05/05', 295.61, 296.81, 297.74, 294.6],
    ['2023/05/08', 297.74, 296.97, 297.82, 295.66],
    ['2023/05/09', 295.26, 294.19, 296.55, 294.07],
    ['2023/05/10', 294.2, 292.18, 295.08, 290.71],
    ['2023/05/11', 294.35, 293.61, 294.65, 292.62],
    ['2023/05/12', 296.87, 296.27, 297.06, 294.26],
    ['2023/05/15', 295.8, 293.0, 296.28, 292.59],
    ['2023/05/16', 295.34, 292.6, 295.74, 292.41],
    ['2023/05/17', 294.32, 293.33, 294.42, 292.81],
    ['2023/05/18', 295.82, 295.16, 296.28, 293.6],
    ['2023/05/19', 298.48, 298.24, 299.22, 297.15],
    ['2023/05/22', 298.62, 301.53, 302.86, 298.4],
    ['2023/05/23', 292.76, 289.9, 292.76, 288.36],
    ['2023/05/24', 286.26, 286.96, 287.46, 283.96],
    ['2023/05/25', 286.49, 286.6, 287.44, 285.31],
    ['2023/05/26', 288.36, 290.76, 291.58, 288.18],
    ['2023/05/30', 292.18, 287.36, 292.18, 287.23],
    ['2023/05/31', 288.18, 286.67, 288.43, 283.2],
    ['2023/06/01', 288.87, 293.09, 293.19, 288.12],
    ['2023/06/02', 298.3, 298.6, 300.29, 297.58],
    ['2023/06/05', 298.19, 296.43, 298.37, 295.88],
    ['2023/06/06', 296.93, 297.12, 297.83, 295.92],
    ['2023/06/07', 295.66, 294.53, 298.14, 294.11],
    ['2023/06/08', 296.6, 298.24, 299.01, 296.6],
    ['2023/06/09', 297.4, 297.8, 298.89, 296.62],
    ['2023/06/12', 300.54, 300.58, 301.84, 299.1],
    ['2023/06/13', 301.27, 300.11, 302.56, 299.94],
    ['2023/06/14', 304.72, 302.79, 305.22, 300.72],
    ['2023/06/15', 305.46, 306.11, 306.73, 303.66],
    ['2023/06/16', 308.71, 308.02, 309.29, 306.62],
    ['2023/06/20', 306.7, 306.16, 308.06, 305.29],
    ['2023/06/21', 307.11, 308.3, 309.12, 305.54],
    ['2023/06/22', 306.46, 307.29, 308.94, 306.0],
    ['2023/06/23', 306.16, 307.52, 309.01, 305.88],
    ['2023/06/26', 307.5, 306.49, 308.75, 305.85],
    ['2023/06/27', 309.25, 314.09, 314.47, 309.12],
    ['2023/06/28', 315.34, 317.96, 318.01, 315.34],
    ['2023/06/29', 318.36, 320.67, 322.72, 318.25],
    ['2023/06/30', 324.84, 325.21, 327.07, 323.88],
    ['2023/07/03', 325.52, 325.87, 326.02, 323.1],
    ['2023/07/05', 321.6, 320.01, 322.8, 319.63],
    ['2023/07/06', 312.89, 313.53, 314.76, 311.2],
    ['2023/07/07', 314.64, 314.49, 317.56, 312.78],
    ['2023/07/10', 314.25, 318.29, 318.8, 314.0],
    ['2023/07/11', 319.0, 318.39, 320.33, 317.36],
    ['2023/07/12', 320.19, 322.68, 323.04, 318.99],
    ['2023/07/13', 325.84, 323.36, 326.12, 323.0],
    ['2023/07/14', 326.89, 328.78, 329.5, 326.58],
    ['2023/07/17', 328.49, 328.71, 329.88, 327.62],
    ['2023/07/18', 326.22, 326.32, 326.75, 323.53],
    ['2023/07/19', 323.31, 321.09, 324.41, 320.58],
    ['2023/07/20', 320.28, 318.66, 320.71, 317.52],
    ['2023/07/21', 321.01, 318.01, 321.01, 317.93],
    ['2023/07/24', 317.38, 317.16, 318.66, 316.44],
    ['2023/07/25', 314.43, 316.11, 317.33, 313.86],
    ['2023/07/26', 314.34, 317.35, 318.63, 314.02],
    ['2023/07/27', 321.4, 317.27, 322.08, 316.45],
    ['2023/07/28', 321.71, 321.82, 323.61, 321.15],
    ['2023/07/31', 322.5, 320.39, 322.5, 319.34],
    ['2023/08/01', 317.0, 317.62, 319.54, 316.57],
    ['2023/08/02', 311.9, 313.56, 322.16, 311.76],
    ['2023/08/03', 312.0, 314.16, 316.32, 311.76],
]);
var volumes = [
    310600.0,
    212800.0,
    246100.0,
    181300.0,
    299900.0,
    176800.0,
    96400.0,
    288300.0,
    221200.0,
    252800.0,
    220100.0,
    473400.0,
    211800.0,
    173800.0,
    202600.0,
    279500.0,
    271300.0,
    375900.0,
    325700.0,
    308600.0,
    334900.0,
    444800.0,
    156600.0,
    245900.0,
    266500.0,
    321100.0,
    339300.0,
    437700.0,
    290800.0,
    355500.0,
    183200.0,
    578700.0,
    421300.0,
    527200.0,
    577100.0,
    275200.0,
    413900.0,
    433200.0,
    444600.0,
    282600.0,
    412900.0,
    509600.0,
    361200.0,
    332600.0,
    340400.0,
    493500.0,
    322000.0,
    319600.0,
    463100.0,
    388100.0,
    308500.0,
    264300.0,
    179100.0,
    260600.0,
    285800.0,
    399700.0,
    352600.0,
    257300.0,
    261200.0,
    356600.0,
    277900.0,
    299200.0,
    595000.0,
    528200.0,
    565300.0,
    298700.0,
    385900.0,
    261300.0,
    445800.0,
    439700.0,
    341900.0,
    289800.0,
    194100.0,
    347900.0,
    143500.0,
    181700.0,
    162600.0,
    213200.0,
    70200.0,
    203600.0,
    223500.0,
    282600.0,
    299200.0,
    353700.0,
    372300.0,
    301300.0,
    194800.0,
    228800.0,
    150100.0,
    147000.0,
    343300.0,
    205300.0,
    221400.0,
    155900.0,
    192700.0,
    208800.0,
    335000.0,
    180600.0,
    222000.0,
    190300.0,
    163200.0,
    189300.0,
    141200.0,
    316400.0,
    354700.0,
    205900.0,
    212900.0,
    564700.0,
    297700.0,
    332600.0,
    329800.0,
    186400.0,
    340100.0,
    566200.0,
    605100.0,
    311800.0,
    373100.0,
    283700.0,
    275200.0,
    362500.0,
    802900.0,
    481300.0,
    708600.0,
    786100.0,
    1191400.0,
    776300.0,
    395300.0,
    464800.0,
    445200.0,
    306600.0,
    564700.0,
    232000.0,
    198100.0,
    282600.0,
    217500.0,
    251800.0,
    331800.0,
    286900.0,
    258000.0,
    246200.0,
    195600.0,
    351700.0,
    203300.0,
    203500.0,
    494700.0,
    752100.0,
    269500.0,
    165000.0,
    242300.0,
    476400.0,
    310500.0,
    419800.0,
    405900.0,
    413300.0,
    354500.0,
    262400.0,
    262000.0,
    284200.0,
    327300.0,
    326800.0,
    237100.0,
    200500.0,
    186100.0,
    251400.0,
    237300.0,
    186300.0,
    194400.0,
    364800.0,
    402700.0,
    202400.0,
    227500.0,
    294200.0,
    679800.0,
    462000.0,
    337500.0,
    309300.0,
    271900.0,
    428800.0,
    324300.0,
    316000.0,
    249800.0,
    325100.0,
    466300.0,
    383500.0,
    163000.0,
    298300.0,
    330100.0,
    946900.0,
    465000.0,
    297100.0,
    378900.0,
    438200.0,
    333000.0,
    393800.0,
    316000.0,
    316900.0,
    246200.0,
    365400.0,
    354700.0,
    236800.0,
    541000.0,
    445100.0,
    228300.0,
    221900.0,
    405200.0,
    482200.0,
    269400.0,
    364500.0,
    168300.0,
    312300.0,
    315100.0,
    289300.0,
    263100.0,
    275000.0,
    359400.0,
    418100.0,
    657600.0,
    294900.0,
    355800.0,
    400200.0,
    268100.0,
    426800.0,
    145000.0,
    240900.0,
    334600.0,
    472100.0,
    521700.0,
    224400.0,
    395100.0,
    451000.0,
    332100.0,
    338500.0,
    378100.0,
    443800.0,
    375200.0,
    334200.0,
    339500.0,
    258600.0,
    362200.0,
    399700.0,
    281200.0,
    213700.0,
    269200.0,
    171600.0,
    319000.0,
    298100.0,
    265000.0,
    340400.0,
    546000.0,
    307500.0,
]

function splitData(rawData) {
    const categoryData = [];
    const values = [];
    for (var i = 0; i < rawData.length; i++) {
        categoryData.push(rawData[i].splice(0, 1)[0]);
        values.push(rawData[i]);
    }
    return {
        categoryData: categoryData,
        values: values,
    };
}

function calculateMA(dayCount) {
    var result = [];
    for (var i = 0, len = data.values.length; i < len; i++) {
        if (i < dayCount) {
            result.push("-");
            continue;
        }
        var sum = 0;
        for (var j = 0; j < dayCount; j++) {
            sum += +data.values[i - j][1];
        }
        result.push(sum / dayCount);
    }
    return result;
}

option = {
    title: {
        text: "RACE",
        left: 0,
    },
    tooltip: {
        trigger: "axis",
        axisPointer: {
            type: "cross",
        },
    },
    legend: {
        data: ["日K", "MA5", "MA20", "MA30"],
    },
    grid: [
        {
            left: "10%",
            right: "10%",
            top: "5%",
            bottom: "30%",
        },
        {
            left: "10%",
            right: "10%",
            top: "70%",
            bottom: "5%",
        },
    ],
    axisPointer: {
        link: [
            {
                xAxisIndex: [0, 1],
            },
        ],
    },
    xAxis: [
        {
            type: "category",
            gridIndex: 0,
            data: data.categoryData,
            boundaryGap: false,
            axisLine: { onZero: false },
            splitLine: { show: false },
            min: "dataMin",
            max: "dataMax",
        },
        {
            type: "category",
            gridIndex: 1,
            data: data.categoryData,
            boundaryGap: false,
            splitLine: { show: false },
            axisLabel: { show: false },
            axisTick: { show: false },
            axisLine: { lineStyle: { color: "#777" } },
            min: "dataMin",
            max: "dataMax",
        },
    ],
    yAxis: [
        {
            scale: true,
            gridIndex: 0,
            splitNumber: 2,
            splitArea: {
                show: true,
            },
            min: (value) => {return value.min * 0.9},
            max: (value) => {return value.max * 1.1},
        },
        {
            scale: true,
            gridIndex: 1,
            splitNumber: 2,
            axisLabel: { show: false },
            axisLine: { show: false },
            axisTick: { show: false },
            splitLine: { show: false },
        },
    ],
    dataZoom: [
        {
            type: "inside",
            xAxisIndex: [0, 1],
            start: 50,
            end: 100,
        },
    ],
    series: [
        {
            name: "volume",
            type: "bar",
            xAxisIndex: 1,
            yAxisIndex: 1,
            itemStyle: {
                color: "#7fbe9e",
            },
            emphasis: {
                itemStyle: {
                    color: "#140",
                },
            },
            data: volumes,
        },
        {
            name: "日K",
            type: "candlestick",
            data: data.values,
            itemStyle: {
                color: upColor,
                color0: downColor,
                borderColor: upBorderColor,
                borderColor0: downBorderColor,
            },
            markLine: {
                symbol: ["none", "none"],
                data: [
                    {
                        name: "min line on close",
                        type: "min",
                        valueDim: "close",
                    },
                    {
                        name: "max line on close",
                        type: "max",
                        valueDim: "close",
                    },
                ],
            },
        },
        {
            name: "MA5",
            type: "line",
            data: calculateMA(5),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
        {
            name: "MA20",
            type: "line",
            data: calculateMA(20),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
        {
            name: "MA30",
            type: "line",
            data: calculateMA(30),
            smooth: true,
            lineStyle: {
                opacity: 0.5,
            },
        },
    ],
};

option && myChart.setOption(option);